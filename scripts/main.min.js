function shackUp(){this.baseURI=document.URL,this.saved=[],this.savedData=[],this.queue=listings,this.currentItems=[],this.searchForm=$(".filters__form"),this.init=function(){this.currentPagination=0,this.totalPages=1,shack.registerClickHandlers(),shack.addListingsToCardStack()},this.decodeHTML=function(t){var n=document.createElement("div");return n.innerHTML=t,0===n.childNodes.length?"":n.childNodes[0].nodeValue},this.love=function(){var t=$(this).parents(".listing");shack.notify($(".notification .fa-heart")),t.animate({opacity:0,left:"+=100%"},500,function(){shack.saved.push({id:t.data("id"),markup:t.detach()}),shack.savedData.push(_.findWhere(shack.currentItems,{id:t.data("id")})),t.addClass("listing--saved"),t.detach(),$(".listing").length<4&&shack.addListingsToCardStack(),shack.initSwipe($(".listing").last())})},this.hate=function(){shack.notify($(".notification .fa-times")),$(this).parents(".listing").animate({opacity:0,left:"-=100%"},500,function(){this.remove(),$(".listing").length<4&&shack.addListingsToCardStack(),shack.initSwipe($(".listing").last())})},this.toggleSavedListingState=function(){var t=$(event.target);if(!t.hasClass("listing__nav-button--active")){var n=t.parents(".listing");n.toggleClass("listing--detailed listing--contact"),shack.navAddActiveState(t)}},this.navAddActiveState=function(t){t.siblings().removeClass("listing__nav-button--active"),t.addClass("listing__nav-button--active")},this.notify=function(t){t.css({display:"block"}),t.animate({opacity:100},300,function(){$(this).delay(100).animate({opacity:0},400,function(){$(".notification .fa").css({display:"none",opacity:0})})})},this.initSwipe=function(t){t.bind("move",function(t){var n=$(this);if(!n.hasClass("listing--detailed")){var e=n.width(),i=(n.css("left"),t.startX/$(window).width());n.css({left:t.startX+t.distX-e*i});var r=$(".notification .fa"),a=$(".notification .fa-heart"),o=$(".notification .fa-times");r.css({display:"block"}),t.distX<0?(o.css({opacity:Math.abs(t.distX/150)}),a.css({opacity:0})):t.distX>0?(a.css({opacity:t.distX/150}),o.css({opacity:0})):r.css({opacity:0})}}),t.bind("moveend",function(t){var n=$(this);if(!n.hasClass("listing--detailed")){var e=$(".notification .fa");if(t.distX>150){var i=n.find(".listing__like-button");i.trigger("click")}else if(t.distX<-150){var r=n.find(".listing__pass-button");r.trigger("click")}else $(this).animate({left:"2.5%"},150),e.animate({opacity:0},100,function(){$(this).css({display:"none"})})}})},this.getQuery=function(){var t=["propertyType","bedrooms","bathrooms"],n={propertyType:$(".prop-type-options .filter--active"),bedrooms:$(".bed-options .filter--active"),bathrooms:$(".bath-options .filter--active")};return queryString=this.searchForm.serialize(),_.each(t,function(t){n[t].length&&(queryString+="&"+t+"="+encodeURIComponent(n[t][0].innerText))}),queryString},this.galleryInit=function(t){t.removeClass("stopped"),t.hasClass("initialized")?(t.unslider("initSwipe"),t.unslider("initKeys"),$(".unslider-nav").css("display","block")):(t.unslider({arrows:!1,autoplay:!1,speed:500,keys:!0,nav:!0,fluid:!0}),t.addClass("initialized"))},this.registerClickHandlers=function(){var t=$("body");$(".listing__nav-button");t.on("click",".saved__item",this.loadSavedListing),t.on("click",".listing__like-button",this.love),t.on("click",".listing__pass-button",this.hate),t.on("click",".listing__close",function(){$(this).parents(".listing").detach()}),t.on("click",".listing__nav-button",this.toggleSavedListingState),t.on("click",".listing__gallery",function(t){var n=$(this),e=n.parents(".listing");e.hasClass("listing--saved")||(e.hasClass("listing--detailed")?(t.stopPropagation(),e.removeClass("listing--detailed listing--contact"),n.unslider("destroySwipe"),n.unslider("destroyKeys"),$(".unslider-nav").css("display","none")):(e.addClass("listing--detailed"),shack.galleryInit(n)))})},this.addListingsToCardStack=function(){if(shack.currentPagination<shack.totalPages){shack.currentPagination++;var t=shack.getListings(shack.currentPagination);t.success(shack.displayListings)}else $(".error__loading").hide()},this.resetListings=function(){shack.currentPagination=0,$(".listing").remove(),shack.currentItems=[],shack.addListingsToCardStack(),$(".error__loading").show()},this.showListings=function(t){var n=_.template($("script.listing-template").html());$("script.listing-template").after(n(t))},this.loadSavedListing=function(t){var n=$(t.target),e=n.attr("data-id")||n.parents(".saved__item").attr("data-id"),i=_.findWhere(shack.saved,{id:e});$(".container").find(".listing").remove(),setTimeout(function(){$("script.listing-template").after(i.markup.addClass("listing--detailed").css({opacity:"1",left:"0"})).fadeIn(),shack.galleryInit(i.markup.find(".listing__gallery"))},100)},this.showSaved=function(t){$(".saved__item").detach();var n=_.template($("script.saved-listing-template").html());$("script.saved-listing-template").after(n(t))},this.getListings=function(t){var n=this.getQuery(),e="http://realestate--bdc-3708.dev.wordpress.boston.com/wp-admin/admin-ajax.php?action=gabriels_boston_listings&method=getListings&channel=sales&"+n;t&&(e+="&results_page="+t);var i=$.ajax({type:"get",url:e,cache:!1,dataType:"json"});return i},this.displayListings=function(t){shack.totalPages=t.data.totalPages,shack.currentItems=shack.currentItems.concat(t.data.listings),shack.showListings({data:t.data.listings}),shack.initSwipe($(".listing").last())}}var shack=shack||new shackUp;$(document).ready(function(){Number.prototype.formatMoney=function(t,n,e){var i=this,t=isNaN(t=Math.abs(t))?2:t,n=void 0==n?".":n,e=void 0==e?",":e,r=0>i?"-":"",a=parseInt(i=Math.abs(+i||0).toFixed(t))+"",o=(o=a.length)>3?o%3:0;return r+(o?a.substr(0,o)+e:"")+a.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+e)+(t?n+Math.abs(i-a).toFixed(t).slice(2):"")},shack.init(),$(".nav-menu").click(function(){var t=$(this);t.siblings().removeClass("active"),t.toggleClass("active"),$(".filters").toggleClass("filters-open"),$(".overlay").fadeToggle(400,"linear")}),$(".nav-logo").click(function(){var t=$(this);t.siblings().removeClass("active"),t.addClass("active"),$(".panel-open").removeClass("panel-open"),$(".saved-open").removeClass("saved-open"),$(".filters-open").removeClass("filters-open"),$(".overlay").fadeOut(400,"linear")}),$(".nav-list").click(function(){var t=$(".saved");t.hasClass("saved-open")||shack.showSaved({data:shack.savedData}),t.toggleClass("saved-open"),$(".container").toggleClass("panel-open"),$(".nav-logo").toggleClass("active"),$(this).toggleClass("active")}),$(".overlay").click(function(t){$(".filters").removeClass("filters-open"),$(".nav-filters").removeClass("active"),$(".overlay").fadeToggle(200,"linear")}),$(".refreshListings").click(function(){shack.resetListings()}),$(".filters__filter-option").click(function(t){var n=$(t.target);n.siblings(".filter--active").removeClass("filter--active"),n.toggleClass("filter--active")}),$(".filters__form").submit(function(t){t.preventDefault(),shack.resetListings(),$(".nav-menu").click()})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,n){function e(t){function n(t){i?(e(),N(n),r=!0,i=!1):r=!1}var e=t,i=!1,r=!1;this.kick=function(t){i=!0,r||n()},this.end=function(t){var n=e;t&&(r?(e=i?function(){n(),t()}:t,i=!0):t())}}function i(){return!0}function r(){return!1}function a(t){t.preventDefault()}function o(t){E[t.target.tagName.toLowerCase()]||t.preventDefault()}function s(t){return 1===t.which&&!t.ctrlKey&&!t.altKey}function u(t,n){var e,i;if(t.identifiedTouch)return t.identifiedTouch(n);for(e=-1,i=t.length;++e<i;)if(t[e].identifier===n)return t[e]}function c(t,n){var e=u(t.changedTouches,n.identifier);if(e&&(e.pageX!==n.pageX||e.pageY!==n.pageY))return e}function l(t){var n;s(t)&&(n={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:t.timeStamp},L(document,D.move,f,n),L(document,D.cancel,d,n))}function f(t){var n=t.data;y(t,n,t,p)}function d(t){p()}function p(){M(document,D.move,f),M(document,D.cancel,d)}function v(t){var n,e;E[t.target.tagName.toLowerCase()]||(n=t.changedTouches[0],e={target:n.target,startX:n.pageX,startY:n.pageY,timeStamp:t.timeStamp,identifier:n.identifier},L(document,P.move+"."+n.identifier,h,e),L(document,P.cancel+"."+n.identifier,g,e))}function h(t){var n=t.data,e=c(t,n);e&&y(t,n,e,m)}function g(t){var n=t.data,e=u(t.changedTouches,n.identifier);e&&m(n.identifier)}function m(t){M(document,"."+t,h),M(document,"."+t,g)}function y(t,n,e,i){var r=e.pageX-n.startX,a=e.pageY-n.startY;I*I>r*r+a*a||$(t,n,e,r,a,i)}function w(){return this._handled=i,!1}function _(t){t._handled()}function $(t,n,e,i,r,a){var o,s;n.target;o=t.targetTouches,s=t.timeStamp-n.timeStamp,n.type="movestart",n.distX=i,n.distY=r,n.deltaX=i,n.deltaY=r,n.pageX=e.pageX,n.pageY=e.pageY,n.velocityX=i/s,n.velocityY=r/s,n.targetTouches=o,n.finger=o?o.length:1,n._handled=w,n._preventTouchmoveDefault=function(){t.preventDefault()},q(n.target,n),a(n.identifier)}function k(t){var n=t.data.event,e=t.data.timer;Y(n,t,t.timeStamp,e)}function b(t){var n=t.data.event,e=t.data.timer;x(),T(n,e,function(){setTimeout(function(){M(n.target,"click",r)},0)})}function x(t){M(document,D.move,k),M(document,D.end,b)}function X(t){var n=t.data.event,e=t.data.timer,i=c(t,n);i&&(t.preventDefault(),n.targetTouches=t.targetTouches,Y(n,i,t.timeStamp,e))}function C(t){var n=t.data.event,e=t.data.timer,i=u(t.changedTouches,n.identifier);i&&(S(n),T(n,e))}function S(t){M(document,"."+t.identifier,X),M(document,"."+t.identifier,C)}function Y(t,n,e,i){var r=e-t.timeStamp;t.type="move",t.distX=n.pageX-t.startX,t.distY=n.pageY-t.startY,t.deltaX=n.pageX-t.pageX,t.deltaY=n.pageY-t.pageY,t.velocityX=.3*t.velocityX+.7*t.deltaX/r,t.velocityY=.3*t.velocityY+.7*t.deltaY/r,t.pageX=n.pageX,t.pageY=n.pageY,i.kick()}function T(t,n,e){n.end(function(){return t.type="moveend",q(t.target,t),e&&e()})}function j(t,n,e){return L(this,"movestart.move",_),!0}function A(t){return M(this,"dragstart drag",a),M(this,"mousedown touchstart",o),M(this,"movestart",_),!0}function F(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(L(this,"dragstart."+t.guid+" drag."+t.guid,a,n,t.selector),L(this,"mousedown."+t.guid,o,n,t.selector))}function O(t){"move"!==t.namespace&&"moveend"!==t.namespace&&(M(this,"dragstart."+t.guid+" drag."+t.guid),M(this,"mousedown."+t.guid))}var I=6,L=t.event.add,M=t.event.remove,q=function(n,e,i){t.event.trigger(e,i,n)},N=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,n){return window.setTimeout(function(){t()},25)}}(),E={textarea:!0,input:!0,select:!0,button:!0},D={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},P={move:"touchmove",cancel:"touchend",end:"touchend"};t.event.special.movestart={setup:j,teardown:A,add:F,remove:O,_default:function(t){var i,a;t._handled()&&(i={target:t.target,startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,timeStamp:t.timeStamp,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},a={event:i,timer:new e(function(n){q(t.target,i)})},t.identifier===n?(L(t.target,"click",r),L(document,D.move,k,a),L(document,D.end,b,a)):(t._preventTouchmoveDefault(),L(document,P.move+"."+t.identifier,X,a),L(document,P.end+"."+t.identifier,C,a)))}},t.event.special.move={setup:function(){L(this,"movestart.move",t.noop)},teardown:function(){M(this,"movestart.move",t.noop)}},t.event.special.moveend={setup:function(){L(this,"movestart.moveend",t.noop)},teardown:function(){M(this,"movestart.moveend",t.noop)}},L(document,"mousedown.move",l),L(document,"touchstart.move",v),"function"==typeof Array.prototype.indexOf&&!function(t,n){for(var e=["changedTouches","targetTouches"],i=e.length;i--;)-1===t.event.props.indexOf(e[i])&&t.event.props.push(e[i])}(t)}),function(t){"function"==typeof define&&define.amd?define(["jquery",void 0,"jquery.event.move"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t(jQuery)}(function(t,n){function e(t){var n,e,i;n=t.currentTarget.offsetWidth,e=t.currentTarget.offsetHeight,i={distX:t.distX,distY:t.distY,velocityX:t.velocityX,velocityY:t.velocityY,finger:t.finger},t.distX>t.distY?t.distX>-t.distY?(t.distX/n>s.threshold||t.velocityX*t.distX/n*s.sensitivity>1)&&(i.type="swiperight",o(t.currentTarget,i)):(-t.distY/e>s.threshold||t.velocityY*t.distY/n*s.sensitivity>1)&&(i.type="swipeup",o(t.currentTarget,i)):t.distX>-t.distY?(t.distY/e>s.threshold||t.velocityY*t.distY/n*s.sensitivity>1)&&(i.type="swipedown",o(t.currentTarget,i)):(-t.distX/n>s.threshold||t.velocityX*t.distX/n*s.sensitivity>1)&&(i.type="swipeleft",o(t.currentTarget,i))}function i(n){var e=t.data(n,"event_swipe");return e||(e={count:0},t.data(n,"event_swipe",e)),e}var r=t.event.add,a=t.event.remove,o=function(n,e,i){t.event.trigger(e,i,n)},s={threshold:.4,sensitivity:6};t.event.special.swipe=t.event.special.swipeleft=t.event.special.swiperight=t.event.special.swipeup=t.event.special.swipedown={setup:function(t,n,a){var t=i(this);if(!(t.count++>0))return r(this,"moveend",e),!0},teardown:function(){var t=i(this);if(!(--t.count>0))return a(this,"moveend",e),!0},settings:s}}),function(){function t(t){function n(n,e,i,r,a,o){for(;a>=0&&o>a;a+=t){var s=r?r[a]:a;i=e(i,n[s],s,n)}return i}return function(e,i,r,a){i=w(i,a,4);var o=!C(e)&&y.keys(e),s=(o||e).length,u=t>0?0:s-1;return arguments.length<3&&(r=e[o?o[u]:u],u+=t),n(e,i,r,o,u,s)}}function n(t){return function(n,e,i){e=_(e,i);for(var r=X(n),a=t>0?0:r-1;a>=0&&r>a;a+=t)if(e(n[a],a,n))return a;return-1}}function e(t,n,e){return function(i,r,a){var o=0,s=X(i);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(e&&a&&s)return a=e(i,r),i[a]===r?a:-1;if(r!==r)return a=n(l.call(i,o,s),y.isNaN),a>=0?a+o:-1;for(a=t>0?o:s-1;a>=0&&s>a;a+=t)if(i[a]===r)return a;return-1}}function i(t,n){var e=A.length,i=t.constructor,r=y.isFunction(i)&&i.prototype||s,a="constructor";for(y.has(t,a)&&!y.contains(n,a)&&n.push(a);e--;)a=A[e],a in t&&t[a]!==r[a]&&!y.contains(n,a)&&n.push(a)}var r=this,a=r._,o=Array.prototype,s=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,f=s.toString,d=s.hasOwnProperty,p=Array.isArray,v=Object.keys,h=u.bind,g=Object.create,m=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var w=function(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,i){return t.call(n,e,i)};case 3:return function(e,i,r){return t.call(n,e,i,r)};case 4:return function(e,i,r,a){return t.call(n,e,i,r,a)}}return function(){return t.apply(n,arguments)}},_=function(t,n,e){return null==t?y.identity:y.isFunction(t)?w(t,n,e):y.isObject(t)?y.matcher(t):y.property(t)};y.iteratee=function(t,n){return _(t,n,1/0)};var $=function(t,n){return function(e){var i=arguments.length;if(2>i||null==e)return e;for(var r=1;i>r;r++)for(var a=arguments[r],o=t(a),s=o.length,u=0;s>u;u++){var c=o[u];n&&void 0!==e[c]||(e[c]=a[c])}return e}},k=function(t){if(!y.isObject(t))return{};if(g)return g(t);m.prototype=t;var n=new m;return m.prototype=null,n},b=function(t){return function(n){return null==n?void 0:n[t]}},x=Math.pow(2,53)-1,X=b("length"),C=function(t){var n=X(t);return"number"==typeof n&&n>=0&&x>=n};y.each=y.forEach=function(t,n,e){n=w(n,e);var i,r;if(C(t))for(i=0,r=t.length;r>i;i++)n(t[i],i,t);else{var a=y.keys(t);for(i=0,r=a.length;r>i;i++)n(t[a[i]],a[i],t)}return t},y.map=y.collect=function(t,n,e){n=_(n,e);for(var i=!C(t)&&y.keys(t),r=(i||t).length,a=Array(r),o=0;r>o;o++){var s=i?i[o]:o;a[o]=n(t[s],s,t)}return a},y.reduce=y.foldl=y.inject=t(1),y.reduceRight=y.foldr=t(-1),y.find=y.detect=function(t,n,e){var i;return i=C(t)?y.findIndex(t,n,e):y.findKey(t,n,e),void 0!==i&&-1!==i?t[i]:void 0},y.filter=y.select=function(t,n,e){var i=[];return n=_(n,e),y.each(t,function(t,e,r){n(t,e,r)&&i.push(t)}),i},y.reject=function(t,n,e){return y.filter(t,y.negate(_(n)),e)},y.every=y.all=function(t,n,e){n=_(n,e);for(var i=!C(t)&&y.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(!n(t[o],o,t))return!1}return!0},y.some=y.any=function(t,n,e){n=_(n,e);for(var i=!C(t)&&y.keys(t),r=(i||t).length,a=0;r>a;a++){var o=i?i[a]:a;if(n(t[o],o,t))return!0}return!1},y.contains=y.includes=y.include=function(t,n,e,i){return C(t)||(t=y.values(t)),("number"!=typeof e||i)&&(e=0),y.indexOf(t,n,e)>=0},y.invoke=function(t,n){var e=l.call(arguments,2),i=y.isFunction(n);return y.map(t,function(t){var r=i?n:t[n];return null==r?r:r.apply(t,e)})},y.pluck=function(t,n){return y.map(t,y.property(n))},y.where=function(t,n){return y.filter(t,y.matcher(n))},y.findWhere=function(t,n){return y.find(t,y.matcher(n))},y.max=function(t,n,e){var i,r,a=-1/0,o=-1/0;if(null==n&&null!=t){t=C(t)?t:y.values(t);for(var s=0,u=t.length;u>s;s++)i=t[s],i>a&&(a=i)}else n=_(n,e),y.each(t,function(t,e,i){r=n(t,e,i),(r>o||r===-1/0&&a===-1/0)&&(a=t,o=r)});return a},y.min=function(t,n,e){var i,r,a=1/0,o=1/0;if(null==n&&null!=t){t=C(t)?t:y.values(t);for(var s=0,u=t.length;u>s;s++)i=t[s],a>i&&(a=i)}else n=_(n,e),y.each(t,function(t,e,i){r=n(t,e,i),(o>r||1/0===r&&1/0===a)&&(a=t,o=r)});return a},y.shuffle=function(t){for(var n,e=C(t)?t:y.values(t),i=e.length,r=Array(i),a=0;i>a;a++)n=y.random(0,a),n!==a&&(r[a]=r[n]),r[n]=e[a];return r},y.sample=function(t,n,e){return null==n||e?(C(t)||(t=y.values(t)),t[y.random(t.length-1)]):y.shuffle(t).slice(0,Math.max(0,n))},y.sortBy=function(t,n,e){return n=_(n,e),y.pluck(y.map(t,function(t,e,i){return{value:t,index:e,criteria:n(t,e,i)}}).sort(function(t,n){var e=t.criteria,i=n.criteria;if(e!==i){if(e>i||void 0===e)return 1;if(i>e||void 0===i)return-1}return t.index-n.index}),"value")};var S=function(t){return function(n,e,i){var r={};return e=_(e,i),y.each(n,function(i,a){var o=e(i,a,n);t(r,i,o)}),r}};y.groupBy=S(function(t,n,e){y.has(t,e)?t[e].push(n):t[e]=[n]}),y.indexBy=S(function(t,n,e){t[e]=n}),y.countBy=S(function(t,n,e){y.has(t,e)?t[e]++:t[e]=1}),y.toArray=function(t){return t?y.isArray(t)?l.call(t):C(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:C(t)?t.length:y.keys(t).length},y.partition=function(t,n,e){n=_(n,e);var i=[],r=[];return y.each(t,function(t,e,a){(n(t,e,a)?i:r).push(t)}),[i,r]},y.first=y.head=y.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:y.initial(t,t.length-n)},y.initial=function(t,n,e){return l.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))},y.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:y.rest(t,Math.max(0,t.length-n))},y.rest=y.tail=y.drop=function(t,n,e){return l.call(t,null==n||e?1:n)},y.compact=function(t){return y.filter(t,y.identity)};var Y=function(t,n,e,i){for(var r=[],a=0,o=i||0,s=X(t);s>o;o++){var u=t[o];if(C(u)&&(y.isArray(u)||y.isArguments(u))){n||(u=Y(u,n,e));var c=0,l=u.length;for(r.length+=l;l>c;)r[a++]=u[c++]}else e||(r[a++]=u)}return r};y.flatten=function(t,n){return Y(t,n,!1)},y.without=function(t){return y.difference(t,l.call(arguments,1))},y.uniq=y.unique=function(t,n,e,i){y.isBoolean(n)||(i=e,e=n,n=!1),null!=e&&(e=_(e,i));for(var r=[],a=[],o=0,s=X(t);s>o;o++){var u=t[o],c=e?e(u,o,t):u;n?(o&&a===c||r.push(u),a=c):e?y.contains(a,c)||(a.push(c),r.push(u)):y.contains(r,u)||r.push(u)}return r},y.union=function(){return y.uniq(Y(arguments,!0,!0))},y.intersection=function(t){for(var n=[],e=arguments.length,i=0,r=X(t);r>i;i++){var a=t[i];if(!y.contains(n,a)){for(var o=1;e>o&&y.contains(arguments[o],a);o++);o===e&&n.push(a)}}return n},y.difference=function(t){var n=Y(arguments,!0,!0,1);return y.filter(t,function(t){return!y.contains(n,t)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(t){for(var n=t&&y.max(t,X).length||0,e=Array(n),i=0;n>i;i++)e[i]=y.pluck(t,i);return e},y.object=function(t,n){for(var e={},i=0,r=X(t);r>i;i++)n?e[t[i]]=n[i]:e[t[i][0]]=t[i][1];return e},y.findIndex=n(1),y.findLastIndex=n(-1),y.sortedIndex=function(t,n,e,i){e=_(e,i,1);for(var r=e(n),a=0,o=X(t);o>a;){var s=Math.floor((a+o)/2);e(t[s])<r?a=s+1:o=s}return a},y.indexOf=e(1,y.findIndex,y.sortedIndex),y.lastIndexOf=e(-1,y.findLastIndex),y.range=function(t,n,e){null==n&&(n=t||0,t=0),e=e||1;for(var i=Math.max(Math.ceil((n-t)/e),0),r=Array(i),a=0;i>a;a++,t+=e)r[a]=t;return r};var T=function(t,n,e,i,r){if(!(i instanceof n))return t.apply(e,r);var a=k(t.prototype),o=t.apply(a,r);return y.isObject(o)?o:a};y.bind=function(t,n){if(h&&t.bind===h)return h.apply(t,l.call(arguments,1));if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var e=l.call(arguments,2),i=function(){return T(t,i,n,this,e.concat(l.call(arguments)))};return i},y.partial=function(t){var n=l.call(arguments,1),e=function(){for(var i=0,r=n.length,a=Array(r),o=0;r>o;o++)a[o]=n[o]===y?arguments[i++]:n[o];for(;i<arguments.length;)a.push(arguments[i++]);return T(t,e,this,this,a)};return e},y.bindAll=function(t){var n,e,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(n=1;i>n;n++)e=arguments[n],t[e]=y.bind(t[e],t);return t},y.memoize=function(t,n){var e=function(i){var r=e.cache,a=""+(n?n.apply(this,arguments):i);return y.has(r,a)||(r[a]=t.apply(this,arguments)),r[a]};return e.cache={},e},y.delay=function(t,n){var e=l.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},y.defer=y.partial(y.delay,y,1),y.throttle=function(t,n,e){var i,r,a,o=null,s=0;e||(e={});var u=function(){s=e.leading===!1?0:y.now(),o=null,a=t.apply(i,r),o||(i=r=null)};return function(){var c=y.now();s||e.leading!==!1||(s=c);var l=n-(c-s);return i=this,r=arguments,0>=l||l>n?(o&&(clearTimeout(o),o=null),s=c,a=t.apply(i,r),o||(i=r=null)):o||e.trailing===!1||(o=setTimeout(u,l)),a}},y.debounce=function(t,n,e){var i,r,a,o,s,u=function(){var c=y.now()-o;n>c&&c>=0?i=setTimeout(u,n-c):(i=null,e||(s=t.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,o=y.now();var c=e&&!i;return i||(i=setTimeout(u,n)),c&&(s=t.apply(a,r),a=r=null),s}},y.wrap=function(t,n){return y.partial(n,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,n=t.length-1;return function(){for(var e=n,i=t[n].apply(this,arguments);e--;)i=t[e].call(this,i);return i}},y.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},y.before=function(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),1>=t&&(n=null),e}},y.once=y.partial(y.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),A=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(t){if(!y.isObject(t))return[];if(v)return v(t);var n=[];for(var e in t)y.has(t,e)&&n.push(e);return j&&i(t,n),n},y.allKeys=function(t){if(!y.isObject(t))return[];var n=[];for(var e in t)n.push(e);return j&&i(t,n),n},y.values=function(t){for(var n=y.keys(t),e=n.length,i=Array(e),r=0;e>r;r++)i[r]=t[n[r]];return i},y.mapObject=function(t,n,e){n=_(n,e);for(var i,r=y.keys(t),a=r.length,o={},s=0;a>s;s++)i=r[s],o[i]=n(t[i],i,t);return o},y.pairs=function(t){for(var n=y.keys(t),e=n.length,i=Array(e),r=0;e>r;r++)i[r]=[n[r],t[n[r]]];return i},y.invert=function(t){for(var n={},e=y.keys(t),i=0,r=e.length;r>i;i++)n[t[e[i]]]=e[i];return n},y.functions=y.methods=function(t){var n=[];for(var e in t)y.isFunction(t[e])&&n.push(e);return n.sort()},y.extend=$(y.allKeys),y.extendOwn=y.assign=$(y.keys),y.findKey=function(t,n,e){n=_(n,e);for(var i,r=y.keys(t),a=0,o=r.length;o>a;a++)if(i=r[a],n(t[i],i,t))return i},y.pick=function(t,n,e){var i,r,a={},o=t;if(null==o)return a;y.isFunction(n)?(r=y.allKeys(o),i=w(n,e)):(r=Y(arguments,!1,!1,1),i=function(t,n,e){return n in e},o=Object(o));for(var s=0,u=r.length;u>s;s++){var c=r[s],l=o[c];i(l,c,o)&&(a[c]=l)}return a},y.omit=function(t,n,e){if(y.isFunction(n))n=y.negate(n);else{var i=y.map(Y(arguments,!1,!1,1),String);n=function(t,n){return!y.contains(i,n)}}return y.pick(t,n,e)},y.defaults=$(y.allKeys,!0),y.create=function(t,n){var e=k(t);return n&&y.extendOwn(e,n),e},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,n){return n(t),t},y.isMatch=function(t,n){var e=y.keys(n),i=e.length;if(null==t)return!i;for(var r=Object(t),a=0;i>a;a++){var o=e[a];if(n[o]!==r[o]||!(o in r))return!1}return!0};var F=function(t,n,e,i){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return t===n;t instanceof y&&(t=t._wrapped),n instanceof y&&(n=n._wrapped);var r=f.call(t);if(r!==f.call(n))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n}var a="[object Array]"===r;if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;var o=t.constructor,s=n.constructor;if(o!==s&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in n)return!1}e=e||[],i=i||[];for(var u=e.length;u--;)if(e[u]===t)return i[u]===n;if(e.push(t),i.push(n),a){if(u=t.length,u!==n.length)return!1;for(;u--;)if(!F(t[u],n[u],e,i))return!1}else{var c,l=y.keys(t);if(u=l.length,y.keys(n).length!==u)return!1;for(;u--;)if(c=l[u],!y.has(n,c)||!F(t[c],n[c],e,i))return!1}return e.pop(),i.pop(),!0};y.isEqual=function(t,n){return F(t,n)},y.isEmpty=function(t){return null==t?!0:C(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=p||function(t){return"[object Array]"===f.call(t)},y.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(n){return f.call(n)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&t!==+t},y.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===f.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,n){return null!=t&&d.call(t,n)},y.noConflict=function(){return r._=a,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=b,y.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(n){return y.isMatch(n,t)}},y.times=function(t,n,e){var i=Array(Math.max(0,t));n=w(n,e,1);for(var r=0;t>r;r++)i[r]=n(r);return i},y.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=y.invert(O),L=function(t){var n=function(n){return t[n]},e="(?:"+y.keys(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,n):t}};y.escape=L(O),y.unescape=L(I),y.result=function(t,n,e){var i=null==t?void 0:t[n];return void 0===i&&(i=e),y.isFunction(i)?i.call(t):i};var M=0;y.uniqueId=function(t){var n=++M+"";return t?t+n:n},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},E=/\\|'|\r|\n|\u2028|\u2029/g,D=function(t){return"\\"+N[t]};y.template=function(t,n,e){!n&&e&&(n=e),n=y.defaults({},n,y.templateSettings);var i=RegExp([(n.escape||q).source,(n.interpolate||q).source,(n.evaluate||q).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(i,function(n,e,i,o,s){return a+=t.slice(r,s).replace(E,D),r=s+n.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}var u=function(t){return o.call(this,t,y)},c=n.variable||"obj";return u.source="function("+c+"){\n"+a+"}",u},y.chain=function(t){var n=y(t);return n._chain=!0,n};var P=function(t,n){return t._chain?y(n).chain():n};y.mixin=function(t){y.each(y.functions(t),function(n){var e=y[n]=t[n];y.prototype[n]=function(){var t=[this._wrapped];return c.apply(t,arguments),P(this,e.apply(y,t))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=o[t];y.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],P(this,e)}}),y.each(["concat","join","slice"],function(t){var n=o[t];y.prototype[t]=function(){return P(this,n.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),!function(t){return t?(t.Unslider=function(n,e){var i=this;return i._="unslider",i.defaults={autoplay:!1,delay:3e3,speed:750,easing:"swing",keys:{prev:37,next:39},nav:!0,arrows:{prev:'<a class="'+i._+'-arrow prev">Prev</a>',next:'<a class="'+i._+'-arrow next">Next</a>'},animation:"horizontal",selectors:{container:"ul:first",slides:"li"},animateHeight:!1,activeClass:i._+"-active",swipe:!0,swipeThreshold:.2},i.$context=n,i.options={},i.$parent=null,i.$container=null,i.$slides=null,i.$nav=null,i.$arrows=[],i.total=0,i.current=0,i.prefix=i._+"-",i.eventSuffix="."+i.prefix+~~(2e3*Math.random()),i.interval=null,i.init=function(n){return i.options=t.extend({},i.defaults,n),i.$container=i.$context.find(i.options.selectors.container).addClass(i.prefix+"wrap"),i.$slides=i.$container.children(i.options.selectors.slides),i.setup(),t.each(["nav","arrows","keys","infinite"],function(n,e){i.options[e]&&i["init"+t._ucfirst(e)]()}),jQuery.event.special.swipe&&i.options.swipe&&i.initSwipe(),i.options.autoplay&&i.start(),i.calculateSlides(),i.$context.trigger(i._+".ready"),i.animate(i.options.index||i.current,"init")},i.setup=function(){i.$context.addClass(i.prefix+i.options.animation).wrap('<div class="'+i._+'" />'),i.$parent=i.$context.parent("."+i._);var t=i.$context.css("position");"static"===t&&i.$context.css("position","relative"),i.$context.css("overflow","hidden")},i.calculateSlides=function(){if(i.total=i.$slides.length,"fade"!==i.options.animation){var t="width";"vertical"===i.options.animation&&(t="height"),i.$container.css(t,100*i.total+"%").addClass(i.prefix+"carousel"),i.$slides.css(t,100/i.total+"%")}},i.start=function(){return i.interval=setTimeout(function(){i.next()},i.options.delay),i},i.stop=function(){return clearTimeout(i.interval),i},i.initNav=function(){var n=t('<nav class="'+i.prefix+'nav"><ol /></nav>');i.$slides.each(function(e){var r=this.getAttribute("data-nav")||e+1;t.isFunction(i.options.nav)&&(r=i.options.nav.call(i.$slides.eq(e),e,r)),n.children("ol").append('<li data-slide="'+e+'">'+r+"</li>")}),i.$nav=n.insertAfter(i.$context),i.$nav.find("li").on("click"+i.eventSuffix,function(){var n=t(this).addClass(i.options.activeClass);n.siblings().removeClass(i.options.activeClass),i.animate(n.attr("data-slide"))})},i.initArrows=function(){i.options.arrows===!0&&(i.options.arrows=i.defaults.arrows),t.each(i.options.arrows,function(n,e){i.$arrows.push(t(e).insertAfter(i.$context).on("click"+i.eventSuffix,i[n]))})},i.initKeys=function(){
i.options.keys===!0&&(i.options.keys=i.defaults.keys),t(document).on("keyup"+i.eventSuffix,function(n){t.each(i.options.keys,function(e,r){n.which===r&&t.isFunction(i[e])&&i[e].call(i)})})},i.initSwipe=function(){var t=i.$slides.width();"fade"!==i.options.animation&&i.$container.on({movestart:function(t){return t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY?!!t.preventDefault():void i.$container.css("position","relative")},move:function(n){i.$container.css("left",-(100*i.current)+100*n.distX/t+"%")},moveend:function(n){Math.abs(n.distX)/t>i.options.swipeThreshold?i[n.distX<0?"next":"prev"]():i.$container.animate({left:-(100*i.current)+"%"},i.options.speed/2)}})},i.initInfinite=function(){var n=["first","last"];t.each(n,function(t,e){i.$slides.push.apply(i.$slides,i.$slides.filter(':not(".'+i._+'-clone")')[e]().clone().addClass(i._+"-clone")["insert"+(0===t?"After":"Before")](i.$slides[n[~~!t]]()))})},i.destroyArrows=function(){t.each(i.$arrows,function(t,n){n.remove()})},i.destroySwipe=function(){i.$container.off("movestart move moveend")},i.destroyKeys=function(){t(document).off("keyup"+i.eventSuffix)},i.setIndex=function(t){return 0>t&&(t=i.total-1),i.current=Math.min(Math.max(0,t),i.total-1),i.options.nav&&i.$nav.find('[data-slide="'+i.current+'"]')._active(i.options.activeClass),i.$slides.eq(i.current)._active(i.options.activeClass),i},i.animate=function(n,e){if("first"===n&&(n=0),"last"===n&&(n=i.total),isNaN(n))return i;i.options.autoplay&&i.stop().start(),i.setIndex(n),i.$context.trigger(i._+".change",[n,i.$slides.eq(n)]);var r="animate"+t._ucfirst(i.options.animation);return t.isFunction(i[r])&&i[r](i.current,e),i},i.next=function(){var t=i.current+1;return t>=i.total&&(t=0),i.animate(t,"next")},i.prev=function(){return i.animate(i.current-1,"prev")},i.animateHorizontal=function(t){var n="left";return"rtl"===i.$context.attr("dir")&&(n="right"),i.options.infinite&&i.$container.css("margin-"+n,"-100%"),i.slide(n,t)},i.animateVertical=function(t){return i.options.animateHeight=!0,i.options.infinite&&i.$container.css("margin-top",-i.$slides.outerHeight()),i.slide("top",t)},i.slide=function(t,n){if(i.options.animateHeight&&i._move(i.$context,{height:i.$slides.eq(n).outerHeight()},!1),i.options.infinite){var e;n===i.total-1&&(e=i.total-3,n=-1),n===i.total-2&&(e=0,n=i.total-2),"number"==typeof e&&(i.setIndex(e),i.$context.on(i._+".moved",function(){i.current===e&&i.$container.css(t,-(100*e)+"%").off(i._+".moved")}))}var r={};return r[t]=-(100*n)+"%",i._move(i.$container,r)},i.animateFade=function(t){var n=i.$slides.eq(t).addClass(i.options.activeClass);i._move(n.siblings().removeClass(i.options.activeClass),{opacity:0}),i._move(n,{opacity:1},!1)},i._move=function(t,n,e,r){return e!==!1&&(e=function(){i.$context.trigger(i._+".moved")}),t._move(n,r||i.options.speed,i.options.easing,e)},i.init(e)},t.fn._active=function(t){return this.addClass(t).siblings().removeClass(t)},t._ucfirst=function(t){return(t+"").toLowerCase().replace(/^./,function(t){return t.toUpperCase()})},t.fn._move=function(){return this.stop(!0,!0),t.fn[t.fn.velocity?"velocity":"animate"].apply(this,arguments)},void(t.fn.unslider=function(n){return this.each(function(){var e=t(this);if("string"==typeof n&&e.data("unslider")){n=n.split(":");var i=e.data("unslider")[n[0]];if(t.isFunction(i))return i.apply(e,n[1]?n[1].split(","):null)}return e.data("unslider",new t.Unslider(e,n))})})):console.warn("Unslider needs jQuery")}(window.jQuery);